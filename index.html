<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Seguridad Delagente</title>
  <link rel="icon" href="img/logo-comfenalco.jpg" />

  <!-- Estilos base (tus estilos existentes) -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Chart.js para gráficos -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>

  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    /* Un poco de estilo para la barra de sesión */
    .session-bar{
      display:flex; gap:12px; align-items:center; justify-content:flex-end;
      padding:8px 12px; background:#f6f7f9; border-radius:12px; margin:10px 0;
    }
    .session-bar input{ padding:8px 10px; border:1px solid #ccc; border-radius:8px; }
    .session-bar button{ padding:8px 12px; border:0; border-radius:8px; background:#0d6efd; color:#fff; cursor:pointer; }
    .session-bar small{ color:#666; }
    .pill{ background:#eef2ff; color:#2b2d42; padding:6px 10px; border-radius:999px; }
    .container{ max-width:1200px; margin:0 auto; padding:16px; }
    .cards{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
    .card{ background:#fff; border:1px solid #e8e8e8; border-radius:14px; padding:16px; min-height:240px; }
    @media (max-width:900px){ .cards{ grid-template-columns:1fr; } }
  </style>
</head>
<body>

  <div class="container">
    <header style="display:flex;align-items:center;gap:16px;">
      <img src="img/logo-comfenalco.jpg" alt="Comfenalco Valle" style="height:40px;border-radius:6px;">
      <h1 style="margin:0;">Seguridad DeLaGente</h1>
      <div style="flex:1"></div>

      <!-- Barra de sesión -->
      <div class="session-bar" id="sessionBar">
        <div id="loggedOut">
          <input type="email" id="authEmail" placeholder="Correo" />
          <input type="password" id="authPassword" placeholder="Contraseña" />
          <button id="btnLogin">Iniciar sesión</button>
          <button id="btnRegister" style="background:#198754;">Crear cuenta</button>
          <small>Los avances se sincronizan por usuario</small>
        </div>
        <div id="loggedIn" style="display:none;">
          <span id="whoami" class="pill">Sesión</span>
          <button id="btnLogout" style="background:#dc3545;">Salir</button>
        </div>
      </div>
    </header>

    <!-- Buscador + Progreso (igual que tenías) -->
    <section>
      <input id="search" placeholder="Buscar (ej. contraseñas, 2FA, correo)..." style="width:100%;padding:12px 14px;border:1px solid #e2e2e2;border-radius:12px;">
      <p><strong>Progreso:</strong> <span id="progressPct">0%</span> (<span id="progressCount">0/0</span>)</p>
      <div style="height:8px;background:#eee;border-radius:999px;">
        <div id="progressBar" style="height:8px;background:#0d6efd;width:0%;border-radius:999px;"></div>
      </div>
    </section>

    <!-- Gráficos -->
    <section class="cards" style="margin:18px 0;">
      <div class="card">
        <h3>Avance por categoría</h3>
        <canvas id="chartCategory"></canvas>
      </div>
      <div class="card">
        <h3>Distribución de ítems</h3>
        <canvas id="chartDonut"></canvas>
      </div>
    </section>

    <!-- Checklist (tu HTML dinámico lo genera script.js) -->
    <main id="checklistRoot" style="margin:18px 0;"></main>

    <footer style="text-align:center;color:#777;margin:24px 0;">
      © Comfenalco Valle delagente — Seguridad DeLaGente
    </footer>
  </div>

  <!-- Configuración Supabase (pon aquí tus claves) -->
  <script>
    window.SUPABASE_URL = "https://piqobvnfkglhwkhqzvpe.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpcW9idm5ma2dsaHdraHF6dnBlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzMwNDYsImV4cCI6MjA3NzkwOTA0Nn0.XQWWrmrEQYom9AtoqLYFyRn6ndzre3miEFEeht9yBkU";
  </script>

  <!-- Tu lógica -->
  <script src="script.js"></script>
</body>
</html>
